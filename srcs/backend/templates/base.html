<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}PartStock - Inventory Management{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', path='/style.css') }}">
</head>
<body>
    <header class="header">
        <div class="container">
            <h1><a href="/">PartStock</a></h1>
            <nav class="nav">
                <a href="/products/new">New Product</a>
                <a href="/instances/new">New Instance</a>
            </nav>
        </div>
    </header>

    <main class="main">
        <div class="container">
            {% block content %}{% endblock %}
        </div>
    </main>

    <footer class="footer">
        <div class="container">
            <p>&copy; 2025 PartStock - Auto Parts Inventory</p>
        </div>
    </footer>

    <script>
        // Global JavaScript functions
        async function loadModels(makeId, targetSelectId) {
            if (!makeId) {
                document.getElementById(targetSelectId).innerHTML = '<option value="">Select models...</option>';
                return;
            }
            
            try {
                const response = await fetch(`/api/makes/${makeId}/models`);
                const models = await response.json();
                
                const select = document.getElementById(targetSelectId);
                select.innerHTML = '<option value="">Select models...</option>';
                
                models.forEach(model => {
                    const option = document.createElement('option');
                    option.value = model.id;
                    option.textContent = `${model.name} (${model.start_year}-${model.end_year})`;
                    select.appendChild(option);
                });
            } catch (error) {
                console.error('Error loading models:', error);
            }
        }

        // Search functionality
        function handleSearch(event) {
            const query = event.target.value.trim();
            if (event.key === 'Enter' && query) {
                window.location.href = `/search?q=${encodeURIComponent(query)}`;
            }
        }
    </script>
    
    {% block scripts %}{% endblock %}
</body>
</html>
